(function(){for(var b,z=function(){},x="assert clear count debug dir dirxml error exception group groupCollapsed groupEnd info log markTimeline profile profileEnd table time timeEnd timeline timelineEnd timeStamp trace warn".split(" "),f=x.length,C=window.console=window.console||{};f--;)b=x[f],C[b]||(C[b]=z)})();
(function(b){b.Jcrop=function(z,x){function f(a){return Math.round(a)+"px"}function C(a){a=b(a).offset();return[a.left,a.top]}function y(a){return[a.pageX-I[0],a.pageY-I[1]]}function G(d){"object"!==typeof d&&(d={});a=b.extend(a,d);b.each(["onChange","onSelect","onRelease","onDblClick"],function(d,r){"function"!==typeof a[r]&&(a[r]=function(){})})}function fa(a,g,r){I=C(u);F.setCursor("move"===a?a:a+"-resize");if("move"===a)return F.activateHandlers(ua(g),Z,r);g=w.getFixed();var b=ga(a),c=w.getCorner(ga(b));
w.setPressed(w.getCorner(b));w.setCurrent(c);F.activateHandlers(va(a,g),Z,r)}function va(d,g){return function(r){if(a.aspectRatio)switch(d){case "e":r[1]=g.y+1;break;case "w":r[1]=g.y+1;break;case "n":r[0]=g.x+1;break;case "s":r[0]=g.x+1}else switch(d){case "e":r[1]=g.y2;break;case "w":r[1]=g.y2;break;case "n":r[0]=g.x2;break;case "s":r[0]=g.x2}w.setCurrent(r);m.update()}}function ua(a){var g=a;aa.watchKeys();return function(a){w.moveOffset([a[0]-g[0],a[1]-g[1]]);g=a;m.update()}}function ga(a){switch(a){case "n":return"sw";
case "s":return"nw";case "e":return"nw";case "w":return"ne";case "ne":return"sw";case "nw":return"se";case "se":return"nw";case "sw":return"ne"}}function ia(d){return function(g){if(a.disabled||"move"===d&&!a.allowMove)return!1;I=C(u);M=!0;fa(d,y(g));g.stopPropagation();g.preventDefault();return!1}}function ja(a,g,r){var b=a.width(),c=a.height();b>g&&0<g&&(b=g,c=g/a.width()*a.height());c>r&&0<r&&(c=r,b=r/a.height()*a.width());A=a.width()/b;B=a.height()/c;a.width(b).height(c)}function R(a){return{x:a.x*
A,y:a.y*B,x2:a.x2*A,y2:a.y2*B,w:a.w*A,h:a.h*B}}function Z(d){d=w.getFixed();d.w>a.minSelect[0]&&d.h>a.minSelect[1]?(m.enableHandles(),m.done()):m.release();F.setCursor(a.allowSelect?"crosshair":"default")}function ka(d){if(!a.disabled&&a.allowSelect){M=!0;I=C(u);m.disableHandles();F.setCursor("crosshair");var b=y(d);w.setPressed(b);m.update();F.activateHandlers(wa,Z,"touch"===d.type.substring(0,5));aa.watchKeys();d.stopPropagation();d.preventDefault();return!1}}function wa(a){w.setCurrent(a);m.update()}
function la(){var d=b("<div></div>").addClass(a.baseClass+"-tracker");ma&&d.css({opacity:0,backgroundColor:"white"});return d}function na(d){oa([d[0]/A,d[1]/B,d[2]/A,d[3]/B]);a.onSelect.call(D,R(w.getFixed()));m.enableHandles()}function oa(a){w.setPressed([a[0],a[1]]);w.setCurrent([a[2],a[3]]);m.update()}function pa(){a.disabled=!0;m.disableHandles();m.setCursor("default");F.setCursor("default")}function qa(){a.disabled=!1;ba()}function ca(d,g,r){g=g||a.bgColor;a.bgFade&&b.fx.step.hasOwnProperty("backgroundColor")&&
a.fadeTime&&!r?d.animate({backgroundColor:g},{queue:!1,duration:a.fadeTime}):d.css("backgroundColor",g)}function ba(d){a.allowResize?d?m.enableOnly():m.enableHandles():m.disableHandles();F.setCursor(a.allowSelect?"crosshair":"default");m.setCursor(a.allowMove?"move":"default");a.hasOwnProperty("trueSize")&&(A=a.trueSize[0]/v,B=a.trueSize[1]/l);a.hasOwnProperty("setSelect")&&(na(a.setSelect),m.done(),delete a.setSelect);J.refresh();a.bgColor!=ra&&(ca(a.shade?J.getShades():H,a.shade?a.shadeColor||a.bgColor:
a.bgColor),ra=a.bgColor);S!=a.bgOpacity&&(S=a.bgOpacity,a.shade?J.refresh():m.setBgOpacity(S));T=a.maxSize[0]||0;U=a.maxSize[1]||0;V=a.minSize[0]||0;W=a.minSize[1]||0;a.hasOwnProperty("outerImage")&&(u.attr("src",a.outerImage),delete a.outerImage);m.refresh()}var a=b.extend({},b.Jcrop.defaults),I,N=navigator.userAgent.toLowerCase(),ma=/msie/.test(N),sa=/msie [1-6]\./.test(N);"object"!==typeof z&&(z=b(z)[0]);"object"!==typeof x&&(x={});G(x);var N={border:"none",visibility:"visible",margin:0,padding:0,
position:"absolute",top:0,left:0},q=b(z),ta=!0;if("IMG"==z.tagName){if(0!=q[0].width&&0!=q[0].height)q.width(q[0].width),q.height(q[0].height);else{var da=new Image;da.src=q[0].src;q.width(da.width);q.height(da.height)}var u=q.clone().removeAttr("id").css(N).show();u.width(q.width());u.height(q.height());q.after(u).hide()}else u=q.css(N).show(),ta=!1,null===a.shade&&(a.shade=!0);ja(u,a.boxWidth,a.boxHeight);var v=u.width(),l=u.height(),H=b("<div />").width(v).height(l).addClass(a.baseClass+"-holder").css({position:"relative",
backgroundColor:a.bgColor}).insertAfter(q).append(u);a.addClass&&H.addClass(a.addClass);var K=b("<div />"),Y=b("<div />").width("100%").height("100%").css({zIndex:310,position:"absolute",overflow:"hidden"}),O=b("<div />").width("100%").height("100%").css("zIndex",320),P=b("<div />").css({position:"absolute",zIndex:600}).dblclick(function(){var d=w.getFixed();a.onDblClick.call(D,d)}).insertBefore(u).append(Y,O);ta&&(K=b("<img />").attr("src",u.attr("src")).css(N).width(v).height(l),Y.append(K));sa&&
P.css({overflowY:"hidden"});var Q=a.boundary,L=la().width(v+2*Q).height(l+2*Q).css({position:"absolute",top:f(-Q),left:f(-Q),zIndex:290}).mousedown(ka),ra=a.bgColor,S=a.bgOpacity,T,U,V,W,A,B,M,ea,xa;I=C(u);var E=function(){function d(){var a={},b=["touchstart","touchmove","touchend"],c=document.createElement("div"),e;try{for(e=0;e<b.length;e++){var d=b[e],d="on"+d,h=d in c;h||(c.setAttribute(d,"return;"),h="function"==typeof c[d]);a[b[e]]=h}return a.touchstart&&a.touchend&&a.touchmove}catch(g){return!1}}
var b;b=!0===a.touchSupport||!1===a.touchSupport?a.touchSupport:d();return{createDragger:function(b){return function(d){if(a.disabled||"move"===b&&!a.allowMove)return!1;I=C(u);M=!0;fa(b,y(E.cfilter(d)),!0);d.stopPropagation();d.preventDefault();return!1}},newSelection:function(a){return ka(E.cfilter(a))},cfilter:function(a){a.pageX=a.originalEvent.changedTouches[0].pageX;a.pageY=a.originalEvent.changedTouches[0].pageY;return a},isSupported:d,support:b}}(),w=function(){function d(){if(!a.aspectRatio){var p=
n-c,b=h-e;T&&Math.abs(p)>T&&(n=0<p?c+T:c-T);U&&Math.abs(b)>U&&(h=0<b?e+U:e-U);W/B&&Math.abs(b)<W/B&&(h=0<b?e+W/B:e-W/B);V/A&&Math.abs(p)<V/A&&(n=0<p?c+V/A:c-V/A);0>c&&(n-=c,c-=c);0>e&&(h-=e,e-=e);0>n&&(c-=n,n-=n);0>h&&(e-=h,h-=h);n>v&&(p=n-v,c-=p,n-=p);h>l&&(p=h-l,e-=p,h-=p);c>v&&(p=c-l,h-=p,e-=p);e>l&&(p=e-l,h-=p,e-=p);return m(r(c,e,n,h))}var p=a.aspectRatio,b=a.minSize[0]/A,d=a.maxSize[0]/A,g=n-c,f=h-e,t=Math.abs(g),k=Math.abs(f);0===d&&(d=10*v);t/k<p?(t=h,k*=p,k=0>g?c-k:k+c,0>k?(k=0,t=Math.abs((k-
c)/p),t=0>f?e-t:t+e):k>v&&(k=v,t=Math.abs((k-c)/p),t=0>f?e-t:t+e)):(k=n,t/=p,t=0>f?e-t:e+t,0>t?(t=0,k=Math.abs((t-e)*p),k=0>g?c-k:k+c):t>l&&(t=l,k=Math.abs(t-e)*p,k=0>g?c-k:k+c));k>c?(k-c<b?k=c+b:k-c>d&&(k=c+d),t=t>e?e+(k-c)/p:e-(k-c)/p):k<c&&(c-k<b?k=c-b:c-k>d&&(k=c-d),t=t>e?e+(c-k)/p:e-(c-k)/p);0>k?(c-=k,k=0):k>v&&(c-=k-v,k=v);0>t?(e-=t,t=0):t>l&&(e-=t-l,t=l);return m(r(c,e,k,t))}function b(a){0>a[0]&&(a[0]=0);0>a[1]&&(a[1]=0);a[0]>v&&(a[0]=v);a[1]>l&&(a[1]=l);return[Math.round(a[0]),Math.round(a[1])]}
function r(a,b,d,c){var e=a,t=d,k=b,h=c;d<a&&(e=d,t=a);c<b&&(k=c,h=b);return[e,k,t,h]}function m(a){return{x:a[0],y:a[1],x2:a[2],y2:a[3],w:a[2]-a[0],h:a[3]-a[1]}}var c=0,e=0,n=0,h=0,f,u;return{flipCoords:r,setPressed:function(a){a=b(a);n=c=a[0];h=e=a[1]},setCurrent:function(a){a=b(a);f=a[0]-n;u=a[1]-h;n=a[0];h=a[1]},getOffset:function(){return[f,u]},moveOffset:function(a){var b=a[0];a=a[1];0>c+b&&(b-=b+c);0>e+a&&(a-=a+e);l<h+a&&(a+=l-(h+a));v<n+b&&(b+=v-(n+b));c+=b;n+=b;e+=a;h+=a},getCorner:function(a){var b=
d();switch(a){case "ne":return[b.x2,b.y];case "nw":return[b.x,b.y];case "se":return[b.x2,b.y2];case "sw":return[b.x,b.y2]}},getFixed:d}}(),J=function(){function d(){return g(w.getFixed())}function g(a){p.top.css({left:f(a.x),width:f(a.w),height:f(a.y)});p.bottom.css({top:f(a.y2),left:f(a.x),width:f(a.w),height:f(l-a.y2)});p.right.css({left:f(a.x2),width:f(v-a.x2)});p.left.css({width:f(a.x)})}function r(){return b("<div />").css({position:"absolute",backgroundColor:a.shadeColor||a.bgColor}).appendTo(q)}
function ha(){X||(X=!0,q.insertBefore(u),d(),m.setBgOpacity(1,0,1),K.hide(),c(a.shadeColor||a.bgColor,1),m.isAwake()?n(a.bgOpacity,1):n(1,1))}function c(a,b){ca(h(),a,b)}function e(){X&&(q.remove(),K.show(),X=!1,m.isAwake()?m.setBgOpacity(a.bgOpacity,1,1):(m.setBgOpacity(1,1,1),m.disableHandles()),ca(H,0,1))}function n(b,d){X&&(a.bgFade&&!d?q.animate({opacity:1-b},{queue:!1,duration:a.fadeTime}):q.css({opacity:1-b}))}function h(){return q.children()}var X=!1,q=b("<div />").css({position:"absolute",
zIndex:240,opacity:0}),p={top:r(),left:r().height(l),right:r().height(l),bottom:r()};return{update:d,updateRaw:g,getShades:h,setBgColor:c,enable:ha,disable:e,resize:function(a,b){p.left.css({height:f(b)});p.right.css({height:f(b)})},refresh:function(){a.shade?ha():e();m.isAwake()&&n(a.bgOpacity)},opacity:n}}(),m=function(){function d(a,d){var c=b("<div />").mousedown(ia(a)).css({cursor:a+"-resize",position:"absolute",zIndex:d}).addClass("ord-"+a);E.support&&c.bind("touchstart.jcrop",E.createDragger(a));
O.append(c);return c}function g(a){var b;for(b=0;b<a.length;b++)d(a[b],A++).addClass("jcrop-dragbar")}function r(d){var c,e;for(e=0;e<d.length;e++){switch(d[e]){case "n":c="hline";break;case "s":c="hline bottom";break;case "e":c="vline right";break;case "w":c="vline"}var h=c,h=b("<div />").css({position:"absolute",opacity:a.borderOpacity}).addClass(a.baseClass+"-"+h);Y.append(h)}}function m(b){var c;for(c=0;c<b.length;c++){var e=a.handleSize,h=d(b[c],A++).css({opacity:a.handleOpacity}).addClass(a.baseClass+
"-handle");e&&h.width(e).height(e)}}function c(){var a=w.getFixed();w.setPressed([a.x,a.y]);w.setCurrent([a.x2,a.y2]);e()}function e(a){if(q)return n(a)}function n(b){var c=w.getFixed(),e=c.h;P.width(Math.round(c.w)).height(Math.round(e));var e=c.x,d=c.y;a.shade||K.css({top:f(-d),left:f(-e)});P.css({top:f(d),left:f(e)});a.shade&&J.updateRaw(c);q||(P.show(),a.shade?J.opacity(S):h(S,!0),q=!0);b?a.onSelect.call(D,R(c)):a.onChange.call(D,R(c))}function h(b,c,e){if(q||c)a.bgFade&&!e?u.animate({opacity:b},
{queue:!1,duration:a.fadeTime}):u.css("opacity",b)}function l(){x=!0;if(a.allowResize)return O.show(),!0}function v(){x=!1;O.hide()}function p(a){a?(ea=!0,v()):(ea=!1,l())}var q,A=370,x=!1;a.dragEdges&&b.isArray(a.createDragbars)&&g(a.createDragbars);b.isArray(a.createHandles)&&m(a.createHandles);a.drawBorders&&b.isArray(a.createBorders)&&r(a.createBorders);b(document).bind("touchstart.jcrop-ios",function(a){b(a.currentTarget).hasClass("jcrop-tracker")&&a.stopPropagation()});var z=la().mousedown(ia("move")).css({cursor:"move",
position:"absolute",zIndex:360});E.support&&z.bind("touchstart.jcrop",E.createDragger("move"));Y.append(z);v();return{updateVisible:e,update:n,release:function(){v();P.hide();a.shade?J.opacity(1):h(1);q=!1;a.onRelease.call(D)},refresh:c,isAwake:function(){return q},setCursor:function(a){z.css("cursor",a)},enableHandles:l,enableOnly:function(){x=!0},showHandles:function(){x&&O.show()},disableHandles:v,animMode:p,setBgOpacity:h,done:function(){p(!1);c()}}}(),F=function(){function d(a){c(y(a));return!1}
function g(d){d.preventDefault();d.stopPropagation();M&&(M=!1,e(y(d)),m.isAwake()&&a.onSelect.call(D,R(w.getFixed())),L.css({zIndex:290}),b(document).unbind(".jcrop"),c=function(){},e=function(){});return!1}function r(a){c(y(E.cfilter(a)));return!1}function f(a){return g(E.cfilter(a))}var c=function(){},e=function(){},n=a.trackDocument;n||L.mousemove(d).mouseup(g).mouseout(g);u.before(L);return{activateHandlers:function(a,m,q){M=!0;c=a;e=m;L.css({zIndex:450});q?b(document).bind("touchmove.jcrop",
r).bind("touchend.jcrop",f):n&&b(document).bind("mousemove.jcrop",d).bind("mouseup.jcrop",g);return!1},setCursor:function(a){L.css("cursor",a)}}}(),aa=function(){function d(a){f.hide()}function g(b,c,d){a.allowMove&&(w.moveOffset([c,d]),m.updateVisible(!0));b.preventDefault();b.stopPropagation()}function r(b){if(b.ctrlKey||b.metaKey)return!0;var c=(xa=b.shiftKey?!0:!1)?10:1;switch(b.keyCode){case 37:g(b,-c,0);break;case 39:g(b,c,0);break;case 38:g(b,0,-c);break;case 40:g(b,0,c);break;case 27:a.allowSelect&&
m.release();break;case 9:return!0}return!1}var f=b('<input type="radio" />').css({position:"fixed",left:"-120px",width:"12px"}).addClass("jcrop-keymgr"),c=b("<div />").css({position:"absolute",overflow:"hidden"}).append(f);a.keySupport&&(f.keydown(r).blur(d),sa||!a.fixedSupport?(f.css({position:"absolute",left:"-20px"}),c.append(f).insertBefore(u)):f.insertBefore(u));return{watchKeys:function(){a.keySupport&&(f.show(),f.focus())}}}();E.support&&L.bind("touchstart.jcrop",E.newSelection);O.hide();ba(!0);
var D={setImage:function(b,g){m.release();pa();var f=new Image;f.onload=function(){var m=f.height,c=a.boxWidth,e=a.boxHeight;u.width(f.width).height(m);u.attr("src",b);K.attr("src",b);ja(u,c,e);v=u.width();l=u.height();K.width(v).height(l);L.width(v+2*Q).height(l+2*Q);H.width(v).height(l);J.resize(v,l);qa();"function"===typeof g&&g.call(D)};f.src=b},animateTo:function(b,g){var f=b[0]/A,q=b[1]/B,c=b[2]/A,e=b[3]/B;if(!ea){var n=w.flipCoords(f,q,c,e),h=w.getFixed(),l=[h.x,h.y,h.x2,h.y2],u=a.animationDelay,
p=n[0]-l[0],v=n[1]-l[1],x=n[2]-l[2],z=n[3]-l[3],y=0,t=a.swingSpeed,f=l[0],q=l[1],c=l[2],e=l[3];m.animMode(!0);var k=function(){return function(){y+=(100-y)/t;l[0]=Math.round(f+y/100*p);l[1]=Math.round(q+y/100*v);l[2]=Math.round(c+y/100*x);l[3]=Math.round(e+y/100*z);99.8<=y&&(y=100);100>y?(oa(l),window.setTimeout(k,u)):(m.done(),m.animMode(!1),"function"===typeof g&&g.call(D))}}();window.setTimeout(k,u)}},setSelect:na,setOptions:function(a){G(a);ba()},tellSelect:function(){return R(w.getFixed())},
tellScaled:function(){return w.getFixed()},setClass:function(b){H.removeClass().addClass(a.baseClass+"-holder").addClass(b)},disable:pa,enable:qa,cancel:function(){m.done();F.activateHandlers(null,null)},release:m.release,destroy:function(){H.remove();q.show();q.css("visibility","visible");b(z).removeData("Jcrop")},focus:aa.watchKeys,getBounds:function(){return[v*A,l*B]},getWidgetSize:function(){return[v,l]},getScaleFactor:function(){return[A,B]},getOptions:function(){return a},ui:{holder:H,selection:P}};
ma&&H.bind("selectstart",function(){return!1});q.data("Jcrop",D);return D};b.fn.Jcrop=function(z,x){var f;this.each(function(){if(b(this).data("Jcrop")){if("api"===z)return b(this).data("Jcrop");b(this).data("Jcrop").setOptions(z)}else"IMG"==this.tagName?b.Jcrop.Loader(this,function(){b(this).css({display:"block",visibility:"hidden"});f=b.Jcrop(this,z);b.isFunction(x)&&x.call(f)}):(b(this).css({display:"block",visibility:"hidden"}),f=b.Jcrop(this,z),b.isFunction(x)&&x.call(f))});return this};b.Jcrop.Loader=
function(z,x,f){function C(){G.complete?(y.unbind(".jcloader"),b.isFunction(x)&&x.call(G)):window.setTimeout(C,50)}var y=b(z),G=y[0];y.bind("load.jcloader",C).bind("error.jcloader",function(x){y.unbind(".jcloader");b.isFunction(f)&&f.call(G)});G.complete&&b.isFunction(x)&&(y.unbind(".jcloader"),x.call(G))};b.Jcrop.defaults={allowSelect:!0,allowMove:!0,allowResize:!0,trackDocument:!0,baseClass:"jcrop",addClass:null,bgColor:"black",bgOpacity:.6,bgFade:!1,borderOpacity:.4,handleOpacity:.5,handleSize:null,
aspectRatio:0,keySupport:!0,createHandles:"n s e w nw ne se sw".split(" "),createDragbars:["n","s","e","w"],createBorders:["n","s","e","w"],drawBorders:!0,dragEdges:!0,fixedSupport:!0,touchSupport:null,shade:null,boxWidth:0,boxHeight:0,boundary:2,fadeTime:400,animationDelay:20,swingSpeed:3,minSelect:[0,0],maxSize:[0,0],minSize:[0,0],onChange:function(){},onSelect:function(){},onDblClick:function(){},onRelease:function(){}}})(jQuery);